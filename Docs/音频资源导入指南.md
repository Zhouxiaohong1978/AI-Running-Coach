# 音频资源导入指南

## 三位一体语音系统已完成 ✅

### 已实现功能：
1. ✅ AudioPlayerManager - 音频播放管理器
2. ✅ VoiceAssetMap - 25条语音映射表
3. ✅ ActiveRunView - 跑步语音触发
4. ✅ RunSummaryView - 成就语音播放
5. ✅ 成就进度提醒（90%警告）

---

## 音频文件导入步骤

### 方案一：通过Xcode导入（推荐）

1. **在Xcode中打开项目**
   ```
   AIRunningCoach.xcodeproj
   ```

2. **创建voice文件夹结构**
   - 右键项目根目录 → New Group → 命名为 `voice`
   - 在voice下创建两个子文件夹：
     - `female` - 存放女声11条
     - `male` - 存放男声14条

3. **导入音频文件**
   - 将桌面上的音频文件拖入对应文件夹：
     ```
     female/
       ├── 跑前_01.m4a
       ├── 跑后_01.m4a
       ├── 跑后_02.m4a
       ├── 应急_01.m4a
       ├── 应急_02.m4a
       ├── 新手成就_01.m4a
       ├── 新手成就_02.m4a
       ├── 新手成就_03.m4a
       ├── 减肥成就_01.m4a
       ├── 减肥成就_02.m4a
       └── 减肥成就_03.m4a

     male/
       ├── 新手跑中_01.m4a
       ├── 新手跑中_02.m4a
       ├── 新手跑中_03.m4a
       ├── 新手跑中_04.m4a
       ├── 新手跑中_05.m4a
       ├── 新手跑中_06.m4a
       ├── 新手跑中_07.m4a
       ├── 新手跑中_08.m4a
       ├── 减肥跑中_01.m4a
       ├── 减肥跑中_02.m4a
       ├── 减肥跑中_03.m4a
       ├── 减肥跑中_04.m4a
       ├── 减肥跑中_05.m4a
       └── 减肥跑中_06.m4a
     ```

4. **确认导入选项**
   - ✅ Copy items if needed
   - ✅ Create groups
   - ✅ Add to targets: AIRunningCoach

5. **验证导入**
   - 在Xcode左侧文件列表中看到voice文件夹
   - 点击任意.m4a文件，右侧显示Target Membership已勾选

---

### 方案二：通过命令行导入

```bash
# 1. 进入项目目录
cd /Users/zhouxiaohong/Desktop/AIRunningCoach

# 2. 创建voice文件夹
mkdir -p voice/female voice/male

# 3. 复制音频文件（需要手动将文件从语音包复制到对应目录）
# 然后在Xcode中右键voice文件夹 → Add Files to "AIRunningCoach"
```

---

## 音频文件清单（25条）

### 女声 - 芊悦（11条）
| 文件名 | 触发时机 | 描述 |
|--------|---------|------|
| 跑前_01.m4a | 开始跑步 | 我们轻轻开始，跟着自己的节奏就好... |
| 跑后_01.m4a | 完成3km | 3公里完成啦，慢慢走一会儿... |
| 跑后_02.m4a | 跑后_01播完 | 点击结束，解锁你的专属成就徽章吧！ |
| 应急_01.m4a | 心率过高 | 状态不太好没关系... |
| 应急_02.m4a | 提前结束 | 想提前结束完全可以... |
| 新手成就_01.m4a | 解锁"初露锋芒" | 恭喜解锁「初露锋芒」成就！ |
| 新手成就_02.m4a | 解锁"节奏大师" | 解锁「节奏大师」！ |
| 新手成就_03.m4a | 解锁"风雨无阻" | 解锁「风雨无阻」！ |
| 减肥成就_01.m4a | 解锁"脂肪杀手" | 解锁「脂肪杀手」！ |
| 减肥成就_02.m4a | 解锁"代谢达人" | 解锁「代谢达人」！ |
| 减肥成就_03.m4a | 解锁"斤斤计较" | 解锁「斤斤计较」！ |

### 男声 - 凯（14条）
| 文件名 | 触发时机 | 描述 |
|--------|---------|------|
| 新手跑中_01.m4a | 0.5km | 身体热起来啦... |
| 新手跑中_02.m4a | 1.0km | 1公里达成！ |
| 新手跑中_03.m4a | 1.5km | 已经过半啦... |
| 新手跑中_04.m4a | 2.0km | 2公里了！ |
| 新手跑中_05.m4a | 2.2km | 累了就走30秒... |
| 新手跑中_06.m4a | 2.5km | 最后500米！ |
| 新手跑中_07.m4a | 2.8km | 最后200米... |
| 新手跑中_08.m4a | 3.0km | 搞定！3公里达成！ |
| 减肥跑中_01.m4a | 0.5km | 燃脂模式启动... |
| 减肥跑中_02.m4a | 1.0km | 1公里+100大卡！ |
| 减肥跑中_03.m4a | 1.5km | 心率超棒... |
| 减肥跑中_04.m4a | 2.0km | 2公里达成！ |
| 减肥跑中_05.m4a | 2.5km | 最后500米... |
| 减肥跑中_06.m4a | 3.0km | 燃脂跑完成！ |

---

## 三位一体联动流程

```
用户选择计划（新手3公里/减肥燃脂）
          ↓
     开始跑步（跑前_01）
          ↓
   距离里程碑触发男声（0.5km, 1km, 1.5km...）
          ↓
   成就90%提醒（TTS语音）
          ↓
   完成3km（跑后_01 → 跑后_02）
          ↓
   进入总结页 → 解锁成就
          ↓
   点击成就徽章 → 播放成就语音
```

---

## 测试步骤

1. **导入音频文件**（按上述方案一或方案二）

2. **编译运行**
   ```bash
   在Xcode中按 Cmd+R 运行
   ```

3. **测试开始语音**
   - 点击"开始跑步" → 听到女声"我们轻轻开始..."

4. **测试跑中语音**
   - 模拟器GPS或真机跑步 → 到0.5km听到男声

5. **测试完成语音**
   - 到达3km → 听到男声"搞定！" → 女声"3公里完成啦"

6. **测试成就语音**
   - 进入总结页 → 点击成就徽章 → 听到女声庆祝

---

## 常见问题

**Q: 音频找不到？**
A: 确保文件名完全匹配（包括下划线），且已添加到Target。

**Q: 音频不播放？**
A: 检查AudioPlayerManager的日志输出，查看文件路径是否正确。

**Q: 如何禁用语音？**
A: 跑步界面右上角麦克风按钮可关闭语音。

**Q: 成就语音如何触发？**
A: 在总结页点击成就徽章即可播放对应语音。

---

**完成状态：** 代码已实现 ✅ | 音频待导入 ⏳
